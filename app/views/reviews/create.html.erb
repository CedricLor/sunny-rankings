<% content_for(:title, "Your Vote") %>

<div class="container">
  <div class="row">
    <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3">
      <div class="row">
        <div class="col-xs-12">
          <div class="card-block shadowed-box">
            <h1 class="text-center">Thank you for your vote!</h1>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div class="card-block shadowed-box">
            <h3 class="text-center">A temporary account has been created for you. To validate your vote, please complete your profile.</h3>
            <p>These temporary credentials will remain valid for three days! After this delay, if you have not updated your profile, your vote will be discarded.</p>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div class="card-block shadowed-box">
            <%= simple_form_for([@review, @user], url: review_user_path(@review, @user), html: { method: :patch }) do |f| %>
              <%= f.input :email, label: "Please update with your personal email." %>
              <%= f.error :email, id: 'user_name_error' %>
              <%= f.input :password, label: "Your temporary password is: #{@user.password}. Please update with your own password." %>
              <%= f.full_error :token %>
              <%= f.button :submit, 'Update' %>
            <% end %>
            <div class="hidden">
              <div id="fakeUsername"><%= @user.email %></div>
              <div id="fakePassword"><%= @user.password %></div>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
          <div class="card-block shadowed-box">
            <h3 class="text-center">Here are your votes for <%= "#{@firm.name}" %>.</h3>
            <p>Please review them carefully and update them, as the case may be.</p>
            <p>Once your are done, press the Validate button.</p>

            <%= simple_form_for @review do |r| %>
              <% @review.answers.each_with_index do |answer,i| %>
                <%= simple_fields_for :answer[i] do |a| %>
                 <%= a.input :user_rating, label: "#{answer.test.test_long_question}", wrapper_html: { class: "text-center my-rating-wrapper" }, input_html: { name: "user_rating[#{i}]", id: "user_rating[#{i}]", value: "#{answer.user_rating}", type: "hidden", class: "rating", "data-filled" => "fa fa-star fa-2x", "data-empty" => "fa fa-star-o fa-2x" } %>
                <% end %>
              <% end %>
              <%= r.input :firm_id, as: :hidden %>
              <%= r.button :submit, "Validate", class: "btn-center" %>
            <% end %>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>
