<%= r.simple_fields_for :answers do |a| %>

  <% user_rating_option_array = [] %>
  <% @tests[a.index].select_options.split(";").each_with_index do |answer, i| %>
    <% user_rating_option_array << ["x", i + 1] %>
    <!-- + 1 is here to fix minimum grade to 1 and maximum to 5 instead of 0 and 4 respect. -->
  <% end %>

  <%= a.input :user_rating,
      as: :radio_buttons,
      boolean_style: :inline,
      collection: (user_rating_option_array),
      label: "#{@tests[a.index].test_long_question}",
      label_html: {
        class: "block"
        },
      wrapper_html: {
        class: "text-center my-rating-wrapper"
      },
      item_wrapper_class: "inline-block",
      input_html: {
        class: "rating-input my-hidden-input"
      }
    %>
<% end %>

<hr/>

<p id="legalWarning" class="bottom-text"></p>
<p class="bottom-text"></p>

<%= r.input_field :confirmed_t_and_c, boolean_style: :inline, id: "confirmed_t_and_c", class: "cgu-checkbox" %>
<label for="confirmed_t_and_c" class="cgu">
  <div class="row">
    <div class="col-xs-3 text-center">
      <i class="fa fa-check"></i>
    </div>
    <div class="col-xs-9">
      <p>
        I hereby confirm that I have read and agreed to the conditions of rating services of Sunny Rankings.
      </p>
    </div>
  </div>
</label>

<div>
  <div class="row">
    <div class="col-xs-3">
    </div>
    <div class="col-xs-9">
      <p>
        <%= link_to('Read the Conditions of Rating Services', static_pages_terms_and_conditions_path)%>
      </p>
    </div>
  </div>
</div>
<hr/>
<%= r.input :temporary_email, label: "Please enter your email" %>
<%= r.button :submit, "Vote", class: "btn-center", id: "voteButton" %>

<% content_for(:after_js) do %>
  <%= render 'reviews/review_form_js' %>
<% end %>
